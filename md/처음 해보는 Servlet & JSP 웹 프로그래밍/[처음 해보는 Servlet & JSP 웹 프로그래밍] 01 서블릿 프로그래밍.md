## 01 자바와 웹



### 1.1 자바 기술의 동향과 종류

### 1.1.1 Java SE

**Java SE(Java Platform, Standard Edition)**는 데스크톱, 서버, 임베디드 시스템 개발을 위한 표준 자바 플랫폼으로 자바의 기본 개발 환경을 제공합니다. **Java SE** 플랫폼에는 자바 개발 환경인 **JDK**와 자바 런타임 환경인 **JRE** 두 가지로 나누어 제공합니다.

- **JDK(Java Development Kit)**: 자바 개발 환경으로서 **Java Virtual Machine(JVM)**과 **컴파일러, 디버거** 및 애플리케이션 개발을 위한 도구들이 포함되어 있습니다.
- **JRE(Java Runtime Environment):** 자바 애플리케이션 개발 도구인 **JDK**의 일부로서, 자바 애플리케이션이 실행되는 데 필요한 최소한의 요건을 제공하며, **JVM**과 핵심적인 클래스들 그리고 각종 지원 파일들로 구성됩니다.



### 1.1.2 Java EE

**Java EE(Java Enterprise Edition)**는 자바의 기본적인 기능을 정의한 **Java SE**에 <u>웹서버 역할을 추가한 것</u>으로 자바 애플리케이션을 동작하게 하는 컨테이너 등을 표준화한 스펙입니다. **Java EE**의 기술로는 웹 프로그래밍에서 사용하는 **JSP, Servlet**과 비즈니스 모듈을 담당하는 **EJB**, 데이터베이스를 연동하는 **JDBC**, 서버의 자원을 관리해주는 **JNDI, JTA, EJB** 등의 많은 기술이 있습니다.



이러한 **Java EE** 스펙에 따라 제품으로 구현한 것을 **WAS(Web Application Server)**라 부릅니다. 많이 사용되는 **WAS**로는 미국 오라클의 **웹로직**, 아파치 소프트웨어의 아파치 **톰캣** 등이 있습니다.



### 1.1.3 Java ME

---



### 1.2 웹에서의 자바 기술

우리가 이 책에서 학습할 서블릿과 JSP는 웹에서 실행되는 애플리케이션 기술이다. 이번 절에서는 웹에서 사용되고 활용되어온 자바 기술의 종류와 기능에 대해 살펴보자.



### 1.2.1 애플릿(Applet)

- 초창기 웹은 **정적**인 페이지만 표현 가능했음 -> 자바 진영에서 **애플릿**을 내놓음, 실시간으로 보여줄 수 있는 **동적**인 데이터 처리 가능하게 됨.
- 그러나 **단점**이 존재했음. 그것은 바로 <u>서버에서 클라이언트 쪽으로 실행 파일을 내려받아서 실행</u>되는 방식이었음. 이를 극복하기 위해 **Servlet**이 등장함.



### 1.2.2 서블릿(Servlet)

- Servlet은 클라이언트가 웹 브라우저를 통해 요청하면 서버에서 실행한 후 <u>결과값만 클라이언트로 전송</u>
- HTTP 프로토콜로 통신하는 웹의 특징과 속성들을 자유롭게 활용할 수 있는 API를 제공 -> 클라이언트의 요청과 서버의 응답에 관한 처리 작업이 쉬워짐



### 1.2.3 JSP(JavaServer Page)

- JSP는 Servlet과 똑같은 기능을 가지고 있다. 아예 동일한 기술이라고 봐도 무방함.

  

- JSP와 Servlet의 차이는 표현 방법과 웹 애플리케이션에서의 역할이다.

  

  - 표현 방법의 차이:

    Servlet: 완벽하게 **자바 언어**로 구현

    JSP: **HTML 페이지 안**에서 **스크립트 형태**로 구현

    

  - 웹 애플리케이션에서의 역할의 차이:

    Servlet: Controller 페이지를 만들 때 사용

    JSP: View 페이지를 만들 때 사용

    

    >View는 단순히 클라이언트가 보는 화면으로서 클라이언트로부터 요청받거나 처리된 결과를 보여주는 페이지 -> JSP로 구현
    >
    >Controller는 View에서 들어온 요청을 받아서 처리하는 페이지 -> Servlet으로 구현





---

### 1.3 웹프로그래밍의 이해



#### 1.3.1 웹이란?

**(1) 웹 문서**

웹 문서란, 웹에서 클라이언트가 서버에 정보를 요청하면 응답하는 콘텐츠라고 할 수 있으며, <u>정적인 웹 문서와 동적인 웹 문서</u>로 구분할 수 있다.



- 정적 컨텐츠: 웹 서버가 이미 만들어져 있는 문서를 클라이언트에게 제공. (HTML)
- 동적 컨텐츠: 웹 서버가 요청 시마다 다른 웹 문서의 내용을 클라이언트에게 제공. 다음 두 가지 방법 중 하나에 의해 처리됨.
  - 클라이언트가 서버에 웹 문서를 요청하면 웹 문서에 동적인 요소를 포함하는 방식(스크립트 방식)
  - 클라이언트가 서버에 웹 문서를 요청하면 서버가 다른 애플리케이션을 통해 웹 문서를 재생성하여 제공하는 방식



동적인 웹 문서 작성 기술로는 CGI, ASP, PHP, 서블릿과 JSP 등이 있다. 앞으로 학습하게 될 JSP가 첫 번째 방식인 스크립트 방식이고, 서블릿은 두 번째 방식을 지원하는 기술이다.



**(2) 웹 애플리케이션**

웹 애플리케이션은 수행되는 위치에 따라서 웹서버에서 수행되는 기술(**Server Side**)과 대표적인 웹 클라이언트인 브라우저에서 수행되는 기술(**Client Side**)로 나뉘며, 구현하는 방식에 따라서 **컴파일 방식**과 비컴파일 방식(**스크립트 방식**)으로 나뉜다.



- Client Side: 클라이언트가 요청 -> 웹 애플리케이션이 클라이언트에게 전송됨 -> 클라이언트의 자원을 이용해 클라이언트에 의해 수행
- Server Side: 웹 애플리케이션이 서버에서 일차 수행(서버의 자원 활용) -> 그 결과를 클라이언트에 전송



- 컴파일 방식: 웹 애플리케이션이 미리 컴파일되고 실행 파일이 만들어진 후 사용됨
- 비컴파일 방식: 요청이 있을 때마다 해석(Interpret)되거나 컴파일이 필요 없음





**(3) 웹 서비스**

웹 서비스란 네트워크상에 분산된 자원들을 서로 연동하여 자원을 공유하기 위한 추상적인 서비스 형태를 의미한다. 웹 서비스를 위한 기술로는 SOAP 기반 웹 서비스와 RESTful 기반 웹 서비스가 있다.



**SOAP 기반 웹 서비스**

SOAP 기반 웹 서비스는 SOA(Service Oriented Architecture) 개념을 실현하기 위한 기술이다. 서비스 제공자가 공유 혹은 서비스하려는 자원을 UDDI라는 전역 서비스 저장소에 등록(publish)하여 공개하면, 서비스 요청자가 검색한 후 서비스 제공자와 HTTP의 응용 프로토콜인 SOAP를 이용하여 메시지를 주고받는 방식이다.



서비스 제공자와 요청자가 주고받는 SOAP 메시지는 SOAP 봉투(envelope), SOAP 헤더와 SOAP 몸체로 구성된 하나의 XML 문서로 표현된다. 이것은 HTTP로 전달되므로 크기가 크며, 송수신 시 헤더와 몸체를 인코딩/디코딩해야 하는 작업을 거친다.



![image-20210309180318247](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20210309180318247.png)



**RESTful 기반 웹 서비스**

RESTful 웹 서비스는 ROA(Resource Oriented Architecture) 개념을 실현하기 위한 리소스 중심의 표현, 전달, 접근 방식의 기술이다. RESTful 웹 서비스는 SOAP 기반 웹 서비스의 문제점인 오버헤드 발생, 메시지의 인코딩/디코딩의 어려움을 보완할 수 있는 REST(Representational State Transfer) 기반의 웹 서비스로서, HTTP의 기본 기능만으로 원격 정보에 접근할 수 있다.



RESTful 웹 서비스는 상호 연동을 위한 서비스를 등록하기 위한 저장소가 필요하지 않으며, 단순히 서버와 클라이언트로만 분리되어 있다. 따라서 리소스 접근을 위해 단순 URI로 표현하며, HTTP의 요청 방식인 GET, POST, PUT, DELETE만으로 접근할 수 있다. 또한, SOAP 메시지는 구조가 복잡하지만, RESTful 기반 웹 서비스의 리소스는 HTTP 요청방식으로 서비스되므로 클라이언트에서 XML, JSON, HTML, 텍스트, 이미지 등 원하는 형식으로 표현할 수 있다. 이러한 표현 형식은 HTTP의 accept 헤더 값이나 URI 파라미터로 지정한다.



![image-20210309180506908](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20210309180506908.png)



#### 1.3.2 웹서버와 웹 애플리케이션 서버

**(1) 웹서버**

**웹서버**란 웹에서 서버 기능을 수행하는 프로그램으로서 HTTP라는 프로토콜을 기반으로 하여 웹 클라이언트(브라우저)로부터의 요청을 서비스하는 기능을 담당한다. HTTP라는 프로토콜을 기반으로 동작하므로 웹서버를 HTTP 서버라고도 한다.



웹서버의 역할은 클라이언트로부터의 **요청을 받는 일**과 처리된(서비스) 결과를 클라이언트로 **응답하는 일**로 나뉘며, 구체적으로 다음 기능들을 처리한다.

- 클라이언트가 요청한 웹 문서를 찾아서 전달하는 기능을 처리
- 요청 파일이 없거나 문제가 발생하면 정해진 코드 값으로 응답
- 클라이언트로부터의 요청에 대한 기본 사용자 인증(Basic Authentication)을 처리
- 서버 프로그램에 대한 요청을 웹 애플리케이션 서버에 수행시키고 그 결과를 응답



**(2) 웹 애플리케이션 서버**

웹서버에서는 클라이언트로부터의 요청을 다양한 목적으로 서비스하기 위해 HTML뿐만 아니라 다양한 형식의 문서와 웹 애플리케이션을 처리한다. 그런데 여러 웹 클라이언트로부터의 요구를 웹서버 단독으로 처리하면 서버의 처리량이 많아지고 속도 및 보안 같은 성능에 문제가 생긴다. 또한, 웹과 C/S(Client / Server) 환경을 모두 필요로 할 때는 웹 기반의 요청과 C/S 환경 기반의 요청을 각각 개별적으로 처리하도록 구축해야 한다.



이러한 여러 가지 이유로 여러 개의 서버를 병렬로 처리하는 방법을 쓰기도 하지만, 웹 서버의 기능을 분리해서 처리하려는 목적으로 웹 애플리케이션 서버(Web Application Server)를 사용한다. 클라이언트로부터 <u>요청받는 일과 화면에 표현</u>하는 로직(Presentation Logic)까지만 **웹서버**에서 담당하고, <u>다양한 기능을 수행</u>하는 로직(Business Logic)은 **컨테이너**가 담당하도록 **WAS**에서 일을 나누어 역할을 분담하는 것이다.



WAS는 크게 **웹서버 기능**과 **컨테이너 기능**으로 구성된다. 대부분 상용화된 WAS는 웹서버나 컨테이너 기능 외에 엔터프라이즈 환경에서 필요한 트랜잭션, 보안, 트래픽 관리, DB 커넥션 풀, 사용자 관리 등의 다양하고 강력한 기능을 제공한다. 



![1_sG81J1k5FgPrdh5OHEgesQ](C:\Users\user\Pictures\1_sG81J1k5FgPrdh5OHEgesQ.png)



![WAS_00000](C:\Users\user\Pictures\WAS_00000.jpg)



**톰캣(Tomcat)**

아파치 톰캣은 아파치에서 개발한 WAS이다. 일반 상용 WAS 제품처럼 Java EE 스펙을 모두 갖추고 있지는 않고, JSP와 서블릿을 실행하는 컨테이너와 웹서버만 제공한다. 톰캣에서 제공하는 웹서버의 기능은 아주 기본적인 기능만 하므로 일반적으로 독립적으로 웹서버를 설치한 후 톰캣과 연동하여 실행되는 구조로 구축한다.



#### 1.3.3 컨테이너

서블릿과 JSP와 같은 웹서버 애플리케이션들은 동적 콘텐츠를 생성하는 웹 컴포넌트이다. 이러한 웹 컴포넌트를 저장하는 저장소 역할, 메모리 로딩, 객체 생성 및 초기화 등 서블릿의 생명주기를 관리하고 JSP를 서블릿으로 변환하는 기능을 수행하는 프로그램이 바로 컨테이너이다.



**(1) 서블릿 컨테이너**

서블릿 컨테이너는 클라이언트의 요청에 따라 서블릿을 수행하는 프로그램이다. 대부분 서블릿 컨테이너는 자바로 구현된 프로그램이다. 서블릿 엔진이라고도 한다.



**(2) JSP 컨테이너**

JSP 컨테이너는 JSP를 서블릿으로 변환하는 프로그램이다. JSP 컨테이너 역시 서블릿으로 구현된 프로그램이다. JSP 컨테이너는 JSP 파일을 서블릿 소스로 변환 및 컴파일까지만 담당하는 프로그램이며, 변환된 서블릿의 수행은 서블릿 컨테이너가 담당한다.



대부분 WAS에서는 서블릿 컨테이너와 JSP 컨테이너를 내장하고 있다.



---

### 1.4 HTTP 프로토콜의 이해

#### 1.4.1 HTTP란?



- 무연결(Connectionless)
- 무상태(Stateless)
- 요청&middot;응답(Request&middot;Response)



#### 1.4.2 HTTP 요청정보

**(1) HTTP 요청방식**







**(2) 요청 URI**

**요청 URI**는 웹 클라이언트가 웹 서버에 요청한 서비스 문서의 정보입니다. **요청 URI**는 네트워크의 자원 정보인 <u>**URL**의 일부</u>로서 **URL(Uniform Resource Locator)**은 네트워크 상에 존재하는 자원을 찾아가기 위한 정보입니다.



**URL**은 다음과 같은 형식을 표현합니다.

**프로토콜 서버주소 포트번호 서버자원정보(Request-URI)**



- **프로토콜**

  프로토콜은 서버와 통신하기 위한 규약으로서 서버마다 사용하는 프로토콜이 정해져 있습니다. 예를 들어, 웹서버는 URL에 HTTP://로 표현하며 오라클 DBMS는 jdbc:oracle:thin:@으로 표현합니다.



- **서버 주소**

  네트워크 상에서 연결된 컴퓨터를 찾아가기 위한 정보로서 **IP 주소** 또는 **도메인 이름**으로 표현합니다.



- **포트 번호**

  URL에서 서버 주소를 이용해 컴퓨터를 찾았다면 포트 번호는 컴퓨터에서 동작하고 있는 서버로 접속하기 위한 정보입니다.



- **URI**

  **URI(Uniform Resource Identifier)**는 서버에서 서비스하는 서버의 **자원 정보**입니다. **URL**에서 <u>포트 번호 다음부터</u>가 **URI**입니다. 

  

  만일 다음과 같은 URL이 있다고 가정해보면,

  `http://www.mysite.com:80/edu/index.html`

  

  먼저 `www.mysite.com:80`을 이용해 서버를 찾아옵니다. 80 정보 다음부터가 접속한 서버에서 제공하는 **자원 정보**로서 이것을 **URI**라고 합니다. **URI** 정보로 웹서버에서 클라이언트가 요청한 문서를 찾아 실행한 후 결과를 또는 그 파일 자체를 클라이언트에 응답합니다.

  



















(중략)