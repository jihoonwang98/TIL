## 1. 정규화를 통한 성능 향상 전략

**정규화의 목적**

- 데이터에 대한 중복성 제거 -> 데이터가 관심사별로 처리됨 -> 성능 UP



정규화를 하면 엔터티가 발생하므로 SQL 문장에서 조인이 많이 발생하여 성능이 오히려 저하될 수도 있다. 이런 부분은 사례별로 유의하여 반정규화를 적용한다.





**정규화를 수행하면 항상 조회 성능이 저하되는가?**

데이터 처리의 성능은 크게 

- 조회(SELECT) 성능과
- 입력 / 수정 / 삭제 (INSERT / UPDATE / DELTE) 성능의

두 부류로 구분된다. 

이 두 가지의 성능은 보통 Trade-Off 되어 나타나는 경우가 많다.



정규화를 수행한다는 것은 데이터를 결정하는 결정자에 의해 함수적 종속을 가지고 있는 일반속성을 의존자로 하여 입력 / 수정 / 삭제 이상을 제거하는 것이다. 데이터의 중복 속성을 제거하고 결정자에 의해 동일한 의미의 일반속성이 하나의 테이블로 집약되므로 한 테이블의 데이터 용량이 최소화되는 효과가 있다. 따라서 정규화된 테이블은 데이터를 처리할 때 속도가 빨라질 수도 있고 느려질 수도 있는 특성이 있다.



![image-20210316185618359](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20210316185618359.png)







## 2. 반정규화된 테이블의 (조회)성능저하 사례1

정규화하여 조인이 발생하면 성능이 심각하게 저하되는가? 다음 예를 살펴보면 2차 정규화를 적용한 테이블에 대해서 조인을 하더라도 PK Unique Index를 이용하면 조인 성능 저하는 미미하게 발생된다.



![image-20210316185758444](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20210316185758444.png)



2차 정규화가 안된 테이블은 직급명과 함께 반정규화된 관서번호, 관서명을 조회하면 하나의 테이블에서 데이터가 조회된다. 2차 정규화된 테이블은 관서번호, 관서명이 관서 테이블에만 존재하기 때문에 두 개의 테이블을 조인하여 처리해야 한다.



정부보관금관서원장에서 데이터를 조회하나, 관서와 정부보관금관서원장을 조인하여 데이터를 조회하나 처리 성능은 사용자가 느끼기에는 거의 차이가 나지 않는다. PK가 걸려있는 방향으로 조인이 걸려 Unique Index를 곧바로 찾아 데이터를 조회하기 때문이다.



게다가 위의 예를 '관서등록일자가 2010년 이후 관서를 모두 조회하라'는 SQL 구문을 처리하는 것으로 바꾸면, 2차 정규화된 테이블이 훨씬 빠르다. 아래 그림에서와 같이 왼쪽 테이블에서는 불필요하게 납부자번호만큼 누적된 데이터를 읽어서 결과를 구분하여 보여주어야 하지만 오른쪽은 관서수만큼만 존재하는 데이터를 읽어 곧바로 결과를 보여주기 때문이다.



![image-20210316190444760](C:\Users\user\AppData\Roaming\Typora\typora-user-images\image-20210316190444760.png)







## 3. 반정규화된 테이블의 성능저하 사례2

두 개의 엔터티가 통합되어 반정규화된 또 다른 경우를 살펴본다.





















## 4. 반정규화된 테이블의 성능저하 사례3



## 5. 반정규화된 테이블의 성능저하 사례4



## 6. 함수적 종속성(Functional Dependency)에 근거한 정규화 수행 필요

